{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\权益\\demo\\src\\components\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\权益\\demo\\src\\components\\index.vue","mtime":1610954697974},{"path":"C:\\Users\\Administrator\\Desktop\\权益\\demo\\.babelrc","mtime":1574662453873},{"path":"C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607394529649},{"path":"C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1607394511239},{"path":"C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1607394629632},{"path":"C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607394529649},{"path":"C:\\Users\\Administrator\\Desktop\\权益\\demo\\node_modules\\vue-loader\\lib\\index.js","mtime":1607394611475}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar x = null;\nimport topLoad from \"../components/topLoad.vue\";\nexport default {\n  name: 'index',\n  components: {\n    topLoad: topLoad // //注册组件\n\n  },\n  data: function data() {\n    return {\n      list: [],\n      cid: this.$route.query.cid || 571000,\n      page: 0,\n      category: 0,\n      s: 0,\n      advMode: \"0\",\n      jsAdv: \"\",\n      adArray: ['p45', 'p46', 'p47', 'p8', 'p48', 'p49', 'p50', 'p51', 'p52'],\n      navIndex: 0,\n      num: 8,\n      nav: [{\n        name: \"推荐\",\n        selected: 1,\n        id: 0\n      }, {\n        name: \"娱乐\",\n        selected: 0,\n        id: 3\n      }, {\n        name: \"社会\",\n        selected: 0,\n        id: 1\n      }, {\n        name: \"养生\",\n        selected: 0,\n        id: 33\n      }, {\n        name: \"生活\",\n        selected: 0,\n        id: 17\n      }, {\n        name: \"猎奇\",\n        selected: 0,\n        id: 13\n      }, {\n        name: \"有料\",\n        selected: 0,\n        id: 35\n      }],\n      clickNum: 0,\n      clickTimes: \"\",\n      clickMin: \"\",\n      lastTime: \"\",\n      noAd: true,\n      loadTx: 0,\n      psMsg: {\n        text: \"阅读任意2-3篇内容，时长≥45秒\",\n        step: 0,\n        success: 0,\n        imgCdnUrl: \"http://res.hodanet.com/upload/sy/20201117/17/1608196908925.png\",\n        width: 0\n      },\n      showList: \"\",\n      adNum: \"\"\n    };\n  },\n  methods: {\n    touch: function touch(e) {\n      var that = this;\n\n      if (localStorage.getItem(\"over\") != 1) {\n        setTimeout(function () {\n          if (that.loadTx == 1) {\n            if (Number(localStorage.width) < 30) {\n              var index = 10;\n              that.psMsg.width = Number(localStorage.width) + Number(index);\n\n              if (that.psMsg.width >= 30) {\n                that.psMsg.step = 1;\n                that.psMsg.text = \"点击页面中的广告,可继续倒计时\";\n              }\n\n              localStorage.width = that.psMsg.width;\n            } else if (Number(localStorage.width) >= 30 && localStorage.readAd == 2) {\n              if (Number(localStorage.touch) > 0) {\n                console.log(Number(localStorage.touch));\n\n                var _index = 87 - Number(localStorage.width);\n\n                that.psMsg.width = 87;\n                localStorage.width = 87;\n                localStorage.setItem(\"over\", 1);\n                setTimeout(function () {\n                  that.psMsg.success = 1;\n                  that.psMsg.text = \"任务已完成\";\n                  that.psMsg.imgCdnUrl = \"http://res.hodanet.com/upload/sy/20201118/16/1608280846541.png\";\n                  localStorage.alert = 1;\n                }, 4000);\n              } else {\n                that.psMsg.text = \"滑动页面，可继续完成任务\";\n              }\n            }\n\n            localStorage.touch = Number(localStorage.touch) + 1;\n          }\n        }, 50);\n      }\n    },\n    clickNews: function clickNews(id) {\n      var width = null;\n      var that = this;\n\n      if (localStorage.getItem(\"over\") != 1) {\n        if (this.loadTx == 1) {\n          localStorage.touch = Number(localStorage.touch) - 1;\n\n          if (Number(localStorage.width) < 30) {\n            var index = -4;\n            this.psMsg.width = Number(localStorage.width) + index;\n            localStorage.width = this.psMsg.width;\n\n            if (this.psMsg.width >= 30) {\n              this.psMsg.step = 1;\n              this.psMsg.text = \"点击页面中的广告,可继续倒计时\";\n            }\n\n            width = Number(localStorage.width) + 4;\n          } else if (Number(localStorage.width) >= 30 && localStorage.readAd < 2) {\n            if (localStorage.chance == 1) {\n              this.psMsg.width = Number(localStorage.width) + 8;\n              width = Number(localStorage.width);\n              localStorage.width = this.psMsg.width;\n              localStorage.chance = 0;\n            } else {\n              width = Number(localStorage.width);\n            }\n          } else if (Number(localStorage.width) >= 30 && localStorage.readAd == 2) {\n            if (Number(localStorage.touch) > 0) {\n              width = Number(localStorage.width);\n              that.psMsg.width = 87;\n              localStorage.width = 87;\n              localStorage.setItem(\"over\", 1);\n              setTimeout(function () {\n                that.psMsg.success = 1;\n                that.psMsg.text = \"任务已完成\";\n                that.psMsg.imgCdnUrl = \"http://res.hodanet.com/upload/sy/20201118/16/1608280846541.png\";\n              }, 4000);\n            } else {\n              width = Number(localStorage.width);\n\n              if (localStorage.click == 0) {\n                this.psMsg.width = 80;\n                localStorage.width = 80;\n              }\n\n              this.psMsg.text = \"滑动页面，可继续完成任务\";\n            }\n          }\n\n          localStorage.click = Number(localStorage.click) + 1;\n          console.log(localStorage.width);\n        }\n      }\n\n      this.$router.push({\n        path: '/detail',\n        query: {\n          id: id,\n          cid: this.cid,\n          width: width\n        }\n      });\n    },\n    makeRandomArr: function makeRandomArr(arrList, num) {\n      if (num > arrList.length) {\n        return;\n      } //    var tempArr=arrList.concat();    \n\n\n      var tempArr = arrList.slice(0);\n      var newArrList = [];\n\n      for (var i = 0; i < num; i++) {\n        var random = Math.floor(Math.random() * (tempArr.length - 1));\n        var arr = tempArr[random];\n        tempArr.splice(random, 1);\n        newArrList.push(arr);\n      }\n\n      return newArrList;\n    },\n    getNews: function getNews(num, down) {\n      var _this = this;\n\n      var that = this;\n      this.$axios.get(\"../getNewsArray.htm?category=\" + this.category + \"&page=\" + this.page + \"&num=\" + this.num + \"&cid=\" + this.cid).then(function (res) {\n        var list = res.data.data;\n\n        if (_this.noAd == true) {\n          _this.list = _this.list.concat(list);\n        } else {\n          var array = [];\n\n          for (var i = 0; i < that.num; i = i + 2) {\n            array.push(list.slice(i, i + 2));\n          }\n\n          if (that.advMode == 1) {\n            var array2 = [1, 3, 5, 7, 9, 11, 13];\n\n            for (var _i = 0; _i < 7; _i++) {\n              var json = {};\n              json = {\n                AdId: Math.floor(Math.random() * 90000) + 10000,\n                infoType: 1\n              };\n              list.splice(array2[_i], 0, json);\n            }\n          } else if (that.advMode == 2) {\n            for (var _i2 = 0; _i2 < 4; _i2++) {\n              var s = [];\n              var _json = {};\n              _json = {\n                AdId: Math.floor(Math.random() * 90000) + 10000,\n                infoType: 1\n              };\n              s.push(_json);\n              array[_i2] = s.concat(array[_i2]);\n            }\n\n            list = array;\n          } else if (that.advMode == 3) {\n            for (var _i3 = 0; _i3 < 4; _i3++) {\n              if (_i3 % 2 == 0) {\n                var _s = [];\n\n                for (var o = 0; o < 4; o++) {\n                  var _json2 = {\n                    AdId: Math.floor(Math.random() * 90000) + 10000,\n                    infoType: 1\n                  };\n\n                  _s.push(_json2);\n                }\n\n                array[_i3] = _s.concat(array[_i3]);\n              } else {\n                var _s2 = [];\n\n                for (var _o = 0; _o < 2; _o++) {\n                  var _json3 = {\n                    AdId: Math.floor(Math.random() * 90000) + 10000,\n                    infoType: 1\n                  };\n\n                  _s2.push(_json3);\n                }\n\n                array[_i3] = _s2.concat(array[_i3]);\n              }\n            }\n\n            list = array;\n          } else if (that.advMode == 4) {\n            for (var _i4 = 0; _i4 < 3; _i4++) {\n              var _s3 = [];\n\n              for (var _o2 = 0; _o2 < 2; _o2++) {\n                var _json4 = {\n                  AdId: Math.floor(Math.random() * 90000) + 10000,\n                  infoType: 1\n                };\n\n                _s3.push(_json4);\n              }\n\n              array[_i4] = _s3.concat(array[_i4]);\n            }\n\n            list = array;\n          } else if (that.advMode == 5) {\n            var _array = [0, 2, 4];\n\n            for (var _i5 = 0; _i5 < 3; _i5++) {\n              var _array2 = [];\n\n              for (var _s4 = 0; _s4 < 3; _s4++) {\n                var _json5 = {\n                  AdId: Math.floor(Math.random() * 90000) + 10000,\n                  infoType: 1\n                };\n\n                _array2.push(_json5);\n              }\n\n              list.splice(_array[_i5], 0, _array2);\n            }\n          }\n\n          var result = [].concat.apply([], list);\n\n          if (!down) {\n            that.list = result;\n          } else {\n            that.list = that.list.concat(result);\n          }\n\n          var arr8 = new Array(that.adNum).keys();\n          var f = 0;\n\n          if (that.showList) {\n            var showList = Math.round(that.showList * that.adNum);\n            arr8 = Array.from(arr8);\n            arr8 = that.makeRandomArr(arr8, showList);\n          }\n\n          var page = that.page;\n          var len;\n\n          if (that.advMode == 2) {\n            len = 12;\n          } else if (that.advMode == 3) {\n            len = 20;\n          } else if (that.advMode == 4) {\n            len = 16;\n          } else if (that.advMode == 5) {\n            len = 19;\n          } else if (that.advMode == 1) {\n            len = 15;\n          }\n\n          if (that.jsAdv || _this.noAd == false) {\n            setTimeout(function () {\n              for (var _i6 = page * len; _i6 < len * (page + 1); _i6++) {\n                if (that.list[_i6].AdId) {\n                  if (that.showList) {\n                    if (arr8.indexOf(f) > -1) {\n                      that.list[_i6]['adHide'] = 1;\n                      var data = that.list[_i6];\n                      that.list.splice(_i6, 1, data);\n                    }\n                  }\n\n                  var id = that.jsAdv[that.adArray[randomNum(0, 8)]];\n\n                  if (id) {\n                    id = eval('(' + id + ')');\n                    var sogou_div = document.getElementById(that.list[_i6].AdId);\n                    window.sogou_un = window.sogou_un || [];\n                    window.sogou_un.push({\n                      id: id.id,\n                      ele: sogou_div\n                    });\n                  }\n\n                  f++;\n                }\n              }\n            }, 500);\n          }\n        }\n\n        that.s = 0;\n      });\n    },\n    goNav: function goNav(index) {\n      this.nav[this.navIndex].selected = 0;\n      this.navIndex = index;\n      this.nav[index].selected = 1;\n      this.category = this.nav[index].id;\n      this.list = [];\n      this.page = 0;\n      var that = this;\n      this.getNews(this.num);\n    }\n  },\n  mounted: function mounted() {\n    var that = this;\n    this.$nextTick(function () {\n      // this.initScroll()\n      window.onscroll = function () {\n        //变量scrollTop是滚动条滚动时，距离顶部的距离\n        var scrollTop = document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\n\n        var windowHeight = document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\n\n        var scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\n\n        var h = scrollHeight - scrollTop - windowHeight;\n\n        if (h < 100 && that.s == 0) {\n          //写后台加载数据的函数\n          that.page++;\n          that.s = 1;\n          that.getNews(this.num, true);\n        }\n      };\n    });\n  },\n  created: function created() {\n    var _this2 = this;\n\n    var that = this;\n\n    if (this.cid == \"411320\") {\n      this.psMsg.text = \"阅读任意2-3篇内容，时长≥60秒\";\n    }\n\n    this.$axios.get(\"../api/getAdvs.htm?cid=\" + this.cid).then(function (res) {\n      console.log(res.data);\n      _this2.loadTx = res.data.taskSwitch; // this.loadTx = 1\n\n      if (res.data.cnzzUrl) {\n        var cnzz_s_tag = document.createElement('script');\n        cnzz_s_tag.type = 'text/javascript';\n        cnzz_s_tag.async = true;\n        cnzz_s_tag.src = res.data.cnzzUrl;\n        var root_s = document.getElementsByTagName('script')[0];\n        root_s.parentNode.insertBefore(cnzz_s_tag, root_s);\n      }\n\n      if (res.data.showList) {\n        _this2.showList = res.data.showList;\n      }\n\n      if (res.data.advBlock == 1) {\n        _this2.noAd = true;\n      } else {\n        _this2.advMode = res.data.advMode;\n        _this2.jsAdv = res.data.jsAdvdata;\n        _this2.noAd = false;\n      }\n\n      if (res.data.advMode == 4 || res.data.advMode == 5) {\n        _this2.num = 10;\n      }\n\n      if (_this2.advMode == 2) {\n        _this2.adNum = 4;\n      } else if (_this2.advMode == 3) {\n        _this2.adNum = 12;\n      } else if (_this2.advMode == 4) {\n        _this2.adNum = 6;\n      } else if (_this2.advMode == 5) {\n        _this2.adNum = 9;\n      } else if (that.advMode == 1) {\n        _this2.adNum = 7;\n      }\n\n      var date = localStorage.getItem(\"date\");\n\n      if (!date) {\n        date = Math.round(new Date() / 1000);\n        localStorage.setItem(\"date\", date);\n      } else {\n        var date2 = Math.round(new Date() / 1000) - date;\n\n        if (date2 > 86400) {\n          date = Math.round(new Date() / 1000);\n          localStorage.setItem(\"date\", date);\n          localStorage.removeItem(\"clickNum\");\n          localStorage.removeItem(\"lastTime\");\n          localStorage.removeItem(\"width\");\n          localStorage.removeItem(\"click\");\n          localStorage.removeItem(\"readAd\");\n          localStorage.removeItem(\"touch\");\n          localStorage.removeItem(\"over\");\n          localStorage.removeItem(\"alert\");\n        }\n      }\n\n      if (res.data.clickLimit == 1) {\n        x = 1;\n        _this2.clickMin = res.data.clickMin;\n        _this2.clickTimes = res.data.clickTimes;\n        var clickNum = Number(localStorage.getItem(\"clickNum\"));\n\n        if (!clickNum) {\n          localStorage.setItem(\"clickNum\", 0);\n          _this2.clickNum = 0;\n        } else {\n          _this2.clickNum = clickNum;\n        }\n\n        var lastTime = localStorage.getItem(\"lastTime\");\n\n        if (!lastTime) {\n          _this2.lastTime = Date.parse(new Date());\n          localStorage.setItem(\"lastTime\", _this2.lastTime);\n        } else {\n          var time = (Date.parse(new Date()) - Number(lastTime)) / 1000;\n          console.log(time);\n\n          if (time < _this2.clickMin * 60) {\n            if (_this2.clickNum >= _this2.clickTimes) {\n              _this2.noAd = true;\n\n              _this2.$axios.get(\"../reportBlockAdv.htm?cid=\" + _this2.cid).then(function (res) {\n                console.log(res);\n              });\n            }\n          } else {\n            _this2.lastTime = Date.parse(new Date());\n            localStorage.setItem(\"lastTime\", _this2.lastTime);\n            localStorage.setItem(\"clickNum\", 0);\n          }\n        }\n      } else {\n        localStorage.removeItem(\"clickNum\");\n        localStorage.removeItem(\"lastTime\");\n      }\n\n      _this2.getNews(_this2.num);\n    });\n  }\n};\n\nfunction randomNum(minNum, maxNum) {\n  switch (arguments.length) {\n    case 1:\n      return parseInt(Math.random() * minNum + 1, 10);\n      break;\n\n    case 2:\n      return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10);\n      break;\n\n    default:\n      return 0;\n      break;\n  }\n}\n\nwindow.onbeforeunload = function () {\n  var clickNum = Number(localStorage.getItem(\"clickNum\"));\n  clickNum++;\n  localStorage.setItem(\"clickNum\", clickNum);\n  var readAd = Number(localStorage.getItem(\"readAd\"));\n  readAd++;\n\n  if (readAd <= 2) {\n    var width = Number(localStorage.getItem(\"width\"));\n    width += 20;\n\n    if (width > 80) {\n      width = 80;\n    }\n\n    localStorage.setItem(\"width\", width);\n  } else {\n    readAd = 2;\n  }\n\n  localStorage.setItem(\"readAd\", readAd);\n};",null]}